$(function(){function e(){$("input[type='checkbox'][name='chk_all']").prop("checked",!1),t=a.DataTable({language:myApp.datatablesLang,destroy:!0,paging:!0,pageLength:20,lengthChange:!1,searching:!1,ordering:!1,info:!0,autoWidth:!1,serverSide:!0,ajax:function(e,t,a){$.ajax({type:"post",cache:!1,data:e,url:"list",success:function(e){var a=$.parseJSON(e);0==a.code&&t(a)}})},columns:[{"class":"td-checkbox",orderable:!1,data:null,defaultContent:'<input type="checkbox" name="chk_item""/>'},{data:"orgId"},{data:"area"},{data:"orgName"}]})}var t,a=$("#org-table");e(),a.on("change","input[type='checkbox'][name='chk_all']",function(){$("input[type='checkbox'][name='chk_item']").prop("checked",$(this).is(":checked"))}),a.on("change","input[type='checkbox'][name='chk_item']",function(){var e=0===$("input[type='checkbox'][name='chk_item']:not(:checked)").length;$("input[type='checkbox'][name='chk_all']").prop("checked",e)}),$("#deleteOrg").on("click",function(){var e=$("input[type='checkbox'][name='chk_item']:checked").length;return 0==e?void alert("请选择机构"):($("#delete-modal .alert-success").hide(),$("#delete-modal .alert-danger").hide(),$("#delete-modal").modal(),void 0)}),$("#delete-modal button.btn-danger").on("click",function(){var a=[];$("input[type='checkbox'][name='chk_item']:checked").each(function(){var e=t.row($(this).parents("tr")).data();a.push(e.orgId)}),a.length>0&&$.ajax({type:"post",cache:!1,traditional:!0,data:{orgIds:a},url:"delete",success:function(t){var a=$.parseJSON(t);0==a.code?($("#delete-modal .alert-success").text("删除成功"),$("#delete-modal .alert-success").show(),e()):($("#delete-modal .alert-danger").text("删除失败"),$("#delete-modal .alert-danger").show())}})})});
//# sourceMappingURL=orglist-ed2778cc68.js.map
