$(function(){function e(){$("input[type='checkbox'][name='chk_all']").prop("checked",!1),t=a.DataTable({language:myApp.datatablesLang,destroy:!0,paging:!0,lengthChange:!1,searching:!1,ordering:!1,info:!0,autoWidth:!1,serverSide:!0,ajax:function(e,t,a){$.ajax({type:"post",cache:!1,data:e,url:"list",success:function(e){var a=$.parseJSON(e);0==a.code&&t(a)}})},columns:[{"class":"td-checkbox",orderable:!1,data:null,defaultContent:'<input type="checkbox" name="chk_item""/>'},{data:"userId"},{data:"name"},{data:"userCode"},{data:"bank",render:function(e,t,a,c){return e?e.bankName:""}},{data:"roleName"},{data:"createTime"}]})}var t,a=$("#user-table");e(),a.on("change","input[type='checkbox'][name='chk_all']",function(){$("input[type='checkbox'][name='chk_item']").prop("checked",$(this).is(":checked"))}),a.on("change","input[type='checkbox'][name='chk_item']",function(){var e=0===$("input[type='checkbox'][name='chk_item']:not(:checked)").length;$("input[type='checkbox'][name='chk_all']").prop("checked",e)}),$("#resetUser").on("click",function(){var e=$("input[type='checkbox'][name='chk_item']:checked").length;return 0==e?void alert("请选择用户"):e>1?void alert("请选择单个用户"):($("#reset-modal .alert-success").hide(),$("#reset-modal .alert-danger").hide(),$("#reset-modal").modal(),void 0)}),$("#reset-modal button.btn-primary").on("click",function(){var a=$("input[type='checkbox'][name='chk_item']:checked");if(1==a.length){var c=t.row(a.parents("tr")).data();$.ajax({type:"post",cache:!1,data:{userId:c.userId},url:"resetPwd",success:function(t){var a=$.parseJSON(t);0==a.code?($("#reset-modal .alert-success").text("重置成功"),$("#reset-modal .alert-success").show(),e()):($("#reset-modal .alert-danger").text("重置失败"),$("#reset-modal .alert-danger").show())}})}}),$("#deleteUser").on("click",function(){var e=$("input[type='checkbox'][name='chk_item']:checked").length;return 0==e?void alert("请选择用户"):($("#delete-modal .alert-success").hide(),$("#delete-modal .alert-danger").hide(),$("#delete-modal").modal(),void 0)}),$("#delete-modal button.btn-danger").on("click",function(){var a=[];$("input[type='checkbox'][name='chk_item']:checked").each(function(){var e=t.row($(this).parents("tr")).data();a.push(e.userId)}),a.length>0&&$.ajax({type:"post",cache:!1,traditional:!0,data:{userIds:a},url:"delete",success:function(t){var a=$.parseJSON(t);0==a.code?($("#delete-modal .alert-success").text("删除成功"),$("#delete-modal .alert-success").show(),e()):($("#delete-modal .alert-danger").text("删除失败"),$("#delete-modal .alert-danger").show())}})})});
//# sourceMappingURL=userlist-c54942ecc1.js.map
