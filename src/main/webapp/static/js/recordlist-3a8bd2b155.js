$(function(){function e(){$("input[type='checkbox'][name='chk_all']").prop("checked",!1),a=t.DataTable({language:myApp.datatablesLang,destroy:!0,paging:!0,lengthChange:!1,searching:!0,ordering:!1,info:!0,autoWidth:!1,serverSide:!0,ajax:function(e,a,t){e.status=$(".category.active").attr("status"),e.searchValue=e.search.value,$.ajax({type:"post",cache:!1,data:e,url:"list",success:function(e){var t=$.parseJSON(e);if(0==t.code){for(var c=t.cntlist,n={},o=0;o<c.length;o++){var r=c[o];n[r.status]=r.cnt}$(".category").each(function(){var e=n[$(this).attr("status")]||0;$(this).find("span").text("("+e+")")}),a(t)}}})},columns:[{"class":"td-checkbox",orderable:!1,data:null,defaultContent:'<input type="checkbox" name="chk_item""/>'},{"class":"record-id",data:"userName",render:function(e,a,t,c){return'<a href="view/'+t.recordId+'">'+e+"</a>"}},{data:"phoneNumber"},{data:"profession"},{data:"accumulationFund"},{data:"organization",render:function(e,a,t,c){return e?e.orgName:""}},{data:"bank.bankName"},{data:"createTime"}]})}var a,t=$("#record-table");e(),$(".category").on("click",function(){$(".category").removeClass("active"),$(this).addClass("active"),e()}),t.on("change","input[type='checkbox'][name='chk_all']",function(){$("input[type='checkbox'][name='chk_item']").prop("checked",$(this).is(":checked"))}),t.on("change","input[type='checkbox'][name='chk_item']",function(){var e=0===$("input[type='checkbox'][name='chk_item']:not(:checked)").length;$("input[type='checkbox'][name='chk_all']").prop("checked",e)}),$("#showDelete").on("click",function(){var e=$("input[type='checkbox'][name='chk_item']:checked").length;return 0==e?void alert("请选择用户"):($("#delete-modal .alert-success").hide(),$("#delete-modal .alert-danger").hide(),$("#delete-modal").modal(),void 0)}),$("#delete-modal button.btn-danger").on("click",function(){var t=[],c=1;$("input[type='checkbox'][name='chk_item']:checked").each(function(){var e=a.row($(this).parents("tr")).data();0!=e.status&&($("#delete-modal .alert-danger").text("只能删除待联系客户"),$("#delete-modal .alert-danger").show(),c=0),t.push(e.loanid)}),1==c&&t.length>0&&$.ajax({type:"post",cache:!1,traditional:!0,data:{loanid:t,r:Math.random()},url:"loan/delete",success:function(a){var t=$.parseJSON(a);0==t.code?($("#delete-modal .alert-success").text("删除成功"),$("#delete-modal .alert-success").show(),e()):($("#delete-modal .alert-danger").text("删除失败"),$("#delete-modal .alert-danger").show())}})})});
//# sourceMappingURL=recordlist-3a8bd2b155.js.map
